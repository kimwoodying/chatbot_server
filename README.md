# 🚀 chatbot_server
### Django 기반 병원 챗봇 서버 (GCP VM 배포)

> GCP VM에 직접 배포하여 운영 중인 **Django + LLM(RAG)** 기반 챗봇 서버입니다.  
> 병원 안내, 예약 조회, 증상 기반 응답 등을 제공하며, 내부 시스템과 연동되는 구조로 설계되었습니다.

---

## 📌 서비스 개요

- **배포 환경**: Google Cloud Platform (VM)
- **서버 주소**: `34.42.223.43`
- **Backend**: Django (Gunicorn)
- **LLM**: OpenAI / Groq
- **Vector DB**: FAISS
- **Database**: MySQL (병원 DB 연동)
- **접근 방식**: REST API

---

## 🧱 시스템 아키텍처

GCP VM
│
├─ Nginx (80 / 443)
├─ Django Chatbot (8001)
├─ FastAPI (8000, internal)
├─ AI Model Server (5001, internal)
├─ Qdrant (6333, internal)
└─ MySQL (3306, internal)

---

## 🎯 프로젝트 목적

병원 이용자가 자주 문의하는 반복적인 질문(진료과 안내, 위치, 전화번호, 예약 상태 등)을  
자동으로 처리하고, 의료진/시스템 부담을 줄이기 위해 챗봇 서버를 설계·구현했습니다.

- 병원 운영 정보는 **정확한 데이터 기반 응답**
- 증상 관련 문의는 **의학 진단을 대체하지 않는 선에서 안내**
- 예약/대기 조회 등은 **내부 DB 및 API와 연동**

---

## 🧠 주요 기능

- 병원 정보 안내 (진료과, 위치, 연락처, 운영 시간)
- 증상 기반 안내 + 추천 진료과 응답
- 예약 조회 및 상태 확인 (병원 DB 연동)
- FAISS 기반 문서 검색(RAG)으로 정확도 향상
- LLM 응답 캐싱으로 응답 속도 및 비용 절감
- 관리자 페이지를 통한 로그/캐시 관리

---

## 🛠 기술 스택 선택 이유

- **Django**: 인증, 관리자 페이지, ORM 활용에 적합
- **Gunicorn**: 안정적인 WSGI 서버 구성
- **FAISS**: 빠른 벡터 검색이 필요한 병원 문서 RAG에 적합
- **MySQL**: 병원 기존 시스템과의 호환성
- **GCP VM**: 내부 서비스와 동일 네트워크 구성 가능

---

## 🔄 요청 처리 흐름

1. 사용자가 챗봇 API로 메시지 전송
2. 의도 분류 (정보 조회 / 증상 문의 / 예약 관련)
3. 필요 시 DB 또는 내부 API 조회
4. FAISS 기반 문서 검색(RAG)
5. LLM을 통한 응답 생성
6. 결과 캐싱 후 사용자에게 응답

---

## 🚧 한계 및 향후 개선

- 현재는 REST API 기반 (WebSocket 미적용)
- 실시간 채팅 기능 도입 시 ASGI 전환 예정
- 응답 품질 평가 자동화 필요
- 의료진 전용 대시보드 연동 계획
- LLM 모델 교체/추가에 유연한 구조로 확장 예정
